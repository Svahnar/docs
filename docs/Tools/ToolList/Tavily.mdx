
import Video from '@site/src/components/Video';
import { Steps, Step } from '@site/src/components/Steps/Steps';

# Tavily

Empower your agents with real-time web knowledge using **Tavily**, the search engine built specifically for AI.

This guide covers how to configure Tavily for web searching, aggregated answers, and raw content retrieval.

## üí° Core Concepts

To effectively use Tavily, you should understand how it interacts with your agent.

### 1. What is Tavily?
Tavily is a search API optimized for LLMs (RAG). Unlike traditional search engines, it returns structured JSON data‚Äîincluding concise answers, raw text content, and images‚Äîrather than just a list of links.

### 2. Configuration Parameters
You can customize the search behavior in the `config` block:
* **`max_results`**: Limit the number of search results returned (e.g., `5`).
* **`include_answer`**: Set to `True` to get a short, synthesized answer to the query.
* **`include_raw_content`**: Set to `True` if you need the full text of the scraped pages.
* **`search_depth`**: Choose between `basic` (faster) or `advanced` (deeper search).

---

## ‚öôÔ∏è Configuration Steps

Follow these steps to enable web search capabilities for your agents.

<Steps>
  <Step>

### Get your API Key

  1. Sign up at [tavily.com](https://tavily.com/).
  2. Create a new API Key in your dashboard.
  3. Copy the key (it starts with `tvly-`).

  </Step>

  <Step>

### Set up Key Vault (Recommended)

  Hardcoding keys is risky. We recommend using the **Key Vault**.

  1. Navigate to the **Key Vault** section in Svahnar.
  2. Add a new secret named `TAVILY_API_KEY`.
  3. Paste your Tavily API Key as the value.

  :::tip
  This allows you to reference the key in your YAML as `${TAVILY_API_KEY}`.
  :::

  </Step>

  <Step>

### Configure the Tool

  Add the tool to your agent's configuration. You must ensure the agent has a clear instruction to use it.

  **Minimal Configuration:**
  ```yaml
  tools:
    tool_assigned:
      - name: Tavily
        config:
          API_key: ${TAVILY_API_KEY}

```

</Step>
</Steps>

---

## üìö Practical Recipes

### Recipe 1: Standard Web Search Agent

> **Use Case:** An agent that performs broad searches to answer general questions.

```yaml showLineNumbers
create_agent_network:
  agent-1:
    agent_name: "web_search_agent"
    LLM_config:
      params:
        model: "gpt-5-mini"
    tools:
      tool_assigned:
        - name: Tavily
          config:
            API_key: ${TAVILY_API_KEY}
            max_results: 5
    agent_function:
      - "Search the web for authoritative resources about the user's query."

```

### Recipe 2: Advanced RAG Fetcher

> **Use Case:** An agent capable of deep research that needs direct answers and raw content for analysis.

```yaml showLineNumbers
tools:
  tool_assigned:
    - name: Tavily
      config:
        API_key: ${TAVILY_API_KEY}
        max_results: 3
        include_answer: True
        include_raw_content: True
        search_depth: "advanced"

```

---

## üöë Troubleshooting

* **ValueError: API_key must be provided**
* The tool cannot find the API key. Ensure you have either passed it directly in the `config` or referenced a valid Key Vault variable (e.g., `${TAVILY_API_KEY}`).


* **ValueError: The 'query' field must be provided**
* The agent attempted to call the tool without a search term.
* **Fix:** Update your `agent_function` to explicitly state: *"You must provide a search query string when using the Tavily tool."*


* **RuntimeError / 400 Errors**
* This often indicates an issue with the Tavily service or Rate Limits.
* Check your billing status on the Tavily dashboard.
* Ensure you aren't exceeding the `max_results` limit for your plan.


